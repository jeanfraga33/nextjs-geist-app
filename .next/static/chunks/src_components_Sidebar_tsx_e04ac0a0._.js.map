{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  role: string;\n}\n\nexport function Sidebar() {\n  const pathname = usePathname();\n  const router = useRouter();\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    // Verificar se há usuário logado\n    const userData = localStorage.getItem('user');\n    if (userData) {\n      setUser(JSON.parse(userData));\n    } else if (pathname !== '/login') {\n      router.push('/login');\n    }\n  }, [pathname, router]);\n\n  const handleLogout = async () => {\n    try {\n      if (user) {\n        await fetch('/api/auth', {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            userId: user.id,\n            userName: user.name\n          })\n        });\n      }\n      \n      localStorage.removeItem('user');\n      router.push('/login');\n    } catch (error) {\n      console.error('Erro no logout:', error);\n      localStorage.removeItem('user');\n      router.push('/login');\n    }\n  };\n\n  // Não mostrar sidebar na página de login\n  if (pathname === '/login' || !user) {\n    return null;\n  }\n\n  const menuItems = [\n    { href: '/dashboard', label: 'Dashboard', roles: ['admin', 'tecnico', 'atendente'] },\n    { href: '/clients', label: 'Clientes', roles: ['admin', 'atendente'] },\n    { href: '/equipments', label: 'Equipamentos', roles: ['admin', 'tecnico', 'atendente'] },\n    { href: '/orders', label: 'Ordens de Serviço', roles: ['admin', 'tecnico', 'atendente'] },\n    { href: '/inventory', label: 'Estoque', roles: ['admin', 'tecnico'] },\n    { href: '/finance', label: 'Financeiro', roles: ['admin'] },\n    { href: '/reports', label: 'Relatórios', roles: ['admin'] },\n    { href: '/config', label: 'Configurações', roles: ['admin'] },\n  ];\n\n  const filteredMenuItems = menuItems.filter(item => \n    item.roles.includes(user.role)\n  );\n\n  return (\n    <div className=\"fixed left-0 top-0 h-full w-64 bg-white border-r border-gray-200 shadow-sm\">\n      <div className=\"flex flex-col h-full\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            Sistema OS\n          </h1>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Gestão de Serviços\n          </p>\n        </div>\n\n        {/* User Info */}\n        <div className=\"p-4 border-b border-gray-100\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-gray-900 rounded-full flex items-center justify-center\">\n              <span className=\"text-white text-sm font-medium\">\n                {user.name.charAt(0).toUpperCase()}\n              </span>\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium text-gray-900 truncate\">\n                {user.name}\n              </p>\n              <p className=\"text-xs text-gray-500 capitalize\">\n                {user.role}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 p-4\">\n          <ul className=\"space-y-2\">\n            {filteredMenuItems.map((item) => {\n              const isActive = pathname === item.href;\n              return (\n                <li key={item.href}>\n                  <Link\n                    href={item.href}\n                    className={`\n                      flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors\n                      ${isActive \n                        ? 'bg-gray-900 text-white' \n                        : 'text-gray-700 hover:bg-gray-100 hover:text-gray-900'\n                      }\n                    `}\n                  >\n                    {item.label}\n                  </Link>\n                </li>\n              );\n            })}\n          </ul>\n        </nav>\n\n        {/* Logout */}\n        <div className=\"p-4 border-t border-gray-200\">\n          <button\n            onClick={handleLogout}\n            className=\"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-100 hover:text-gray-900 transition-colors\"\n          >\n            Sair\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}